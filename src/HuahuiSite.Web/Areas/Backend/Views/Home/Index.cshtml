@model HuahuiSite.Web.Areas.Backend.Models.HomeViewModel

@{
    ViewData["Title"] = "Home Page";
}

<center>
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="d-flex no-block">
                    <h4 class="card-title">รายการยอดการขาย</h4>
                </div>
                <hr />
                <div class="row">
                    <div class="col-12">
                        <form asp-area="Backend" asp-controller="Home" asp-action="Search" method="post">
                            <div class="form-group row">
                                <label for="example-search-input" class="col-2 col-form-label">วันที่เริ่มตัน - สิ้นสุด :</label>
                                <div class="col-6">
                                    <div class="input-daterange input-group" id="date-range">
                                        <input asp-for="StartDate" class="form-control" onkeypress="event.preventDefault()" onkeydown="event.preventDefault()" />
                                        <div class="input-group-append">
                                            <span class="input-group-text bg-info b-0 text-white">-</span>
                                        </div>
                                        <input asp-for="EndDate" class="form-control" onkeypress="event.preventDefault()" onkeydown="event.preventDefault()" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="example-search-input" class="col-2 col-form-label">ลูกค้า : </label>
                                <div class="col-6">
                                    <input asp-for="CustomerName" class="form-control" type="search">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="example-email-input" class="col-2 col-form-label">Sale: </label>
                                <div class="col-6">
                                    <input asp-for="SaleName" class="form-control" type="search">
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-6">
                                    <button type="submit" class="btn btn-success waves-effect waves-light m-r-10">ค้นหา</button>
                                    <button type="reset" class="btn btn-inverse waves-effect waves-light">ยกเลิก</button>
                                </div>
                            </div>
                            <hr />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</center>

<center>
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="d-flex no-block">
                    <h4 class="card-title">รายการสั่งซื้อสินค้าที่เสร็จสิ้น</h4>
                </div>
                <div class="table-responsive m-t-20">
                    <table class="table stylish-table">
                        <thead>
                            <tr>
                                <th>เลขที่การสั่งซื้อ</th>
                                <th>ชื่อลุกค้า</th>
                                <th>Sale</th>
                                <th>View</th>
                            </tr>
                        </thead>
                        <tbody>

                            @{ int NoOfOrderComplete = 0; }

                            @foreach (var itemOfOrder in Model.OrderList.Where(w => w.Status.Equals("Complete")))
                            {

                                <tr>
                                    <td>@itemOfOrder.Id</td>
                                    <td>@itemOfOrder.CustomerName</td>
                                    <td>@itemOfOrder.SaleName</td>
                                    <td>
                                        <a href="#" data-toggle="modal" data-target="#modal-row-table-order-2-@NoOfOrderComplete">รายละเอียดการสั่งซื้อ</a>
                                        <div class="modal fade" id="modal-row-table-order-2-@NoOfOrderComplete" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
                                            <div class="modal-dialog modal-lg" role="document">
                                                <div class="modal-content">
                                                    <form class="form-row-table">

                                                        <!-- Hidden Value Start -->

                                                        <input type="hidden" name="hid-cart-id" value="@itemOfOrder.Id" />

                                                        <!-- Hidden Value End -->

                                                        <div class="modal-header" style="background-color: #ff6a00;">
                                                            <h4 class="modal-title text-white">View Order: @itemOfOrder.Id</h4>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="text-white">×</span></button>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                                <div class="modal-body">
                                                                    <div class="card">
                                                                        <div class="card-header">
                                                                            <div class="card-actions">
                                                                                <a class="btn-minimize" data-action="expand"><i class="mdi mdi-arrow-expand"></i></a>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card-body collapse show">
                                                                            <div class="table-responsive">
                                                                                <table class="table" id="table-data">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th>Product Name</th>
                                                                                            <th>Picture</th>
                                                                                            <th>Quantity</th>
                                                                                            <th>Total Price</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>

                                                                                        @foreach (var itemOfItemOrder in Model.OrderItemList.Where(w => w.OrderId.Equals(itemOfOrder.Id)))
                                                                                        {

                                                                                            <tr class="tr-data-row">

                                                                                                <!-- Hidden Value of Cart Item Start -->
                                                                                                @*<input type="hidden" name="hid-cart-item-id" value="@itemOfOrderItem.Id" />
                                                                                                    <input type="hidden" name="hid-cart-item-cart-id" value="@itemOfOrderItem.CardId" />
                                                                                                    <input type="hidden" name="hid-cart-item-product-id" value="@itemOfOrderItem.ProductId" />
                                                                                                    <input type="hidden" name="hid-cart-item-is-active" value="@(itemOfOrderItem.IsActive ? "true" : "false")" />
                                                                                                    <input type="hidden" name="hid-cart-item-created-datetime" value="@itemOfOrderItem.CreatedDateTime" />*@

                                                                                                <!-- Hidden Value of Cart Item End -->

                                                                                                <td>@itemOfItemOrder.ProductName</td>
                                                                                                <td>
                                                                                                    <img src="~/images/upload/@itemOfItemOrder.PictureFileName" alt="Picture" width="80" />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input type="number" class="form-control col-sm-4" name="Quantity" value="@itemOfItemOrder.Quantity" onchange="CalculateTotalPrice(this)" disabled />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input type="text" class="form-control col-sm-6" name="TotalPrice" value="@itemOfItemOrder.TotalPrice" disabled />
                                                                                                </td>
                                                                                            </tr>

                                                                                        }

                                                                                    </tbody>
                                                                                </table>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                            @*<button type="button" class="btn btn-success" onclick="UpdateCart(this)"><i class="fa fa-check"></i> Success</button>*@
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                NoOfOrderComplete++;

                            }

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</center>

<center>
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="d-flex no-block">
                    <h4 class="card-title">รายการสั่งซื้อสินค้าที่คงค้าง</h4>
                </div>
                <div class="table-responsive m-t-20">
                    <table class="table stylish-table">
                        <thead>
                            <tr>
                                <th>เลขที่การสั่งซื้อ</th>
                                <th>ชื่อลุกค้า</th>
                                <th>Sale</th>
                                <th>View</th>
                            </tr>
                        </thead>
                        <tbody>

                            @{ int NoOfOrderNotComplete = 0; }

                            @foreach (var itemOfOrder in Model.OrderList.Where(w => w.Status.Equals("Confirm") || w.Status.Equals("Approve")))
                            {

                                <tr>
                                    <td>@itemOfOrder.Id</td>
                                    <td>@itemOfOrder.CustomerName</td>
                                    <td>@itemOfOrder.SaleName</td>
                                    <td>
                                        <a href="#" data-toggle="modal" data-target="#modal-row-table-order-2-@NoOfOrderNotComplete">รายละเอียดการสั่งซื้อ</a>
                                        <div class="modal fade" id="modal-row-table-order-2-@NoOfOrderNotComplete" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
                                            <div class="modal-dialog modal-lg" role="document">
                                                <div class="modal-content">
                                                    <form class="form-row-table">

                                                        <!-- Hidden Value Start -->

                                                        <input type="hidden" name="hid-cart-id" value="@itemOfOrder.Id" />

                                                        <!-- Hidden Value End -->

                                                        <div class="modal-header" style="background-color: #ff6a00;">
                                                            <h4 class="modal-title text-white">View Order: @itemOfOrder.Id</h4>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="text-white">×</span></button>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                                <div class="modal-body">
                                                                    <div class="card">
                                                                        <div class="card-header">
                                                                            <div class="card-actions">
                                                                                <a class="btn-minimize" data-action="expand"><i class="mdi mdi-arrow-expand"></i></a>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card-body collapse show">
                                                                            <div class="table-responsive">
                                                                                <table class="table" id="table-data">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th>Product Name</th>
                                                                                            <th>Picture</th>
                                                                                            <th>Quantity</th>
                                                                                            <th>Total Price</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>

                                                                                        @foreach (var itemOfItemOrder in Model.OrderItemList.Where(w => w.OrderId.Equals(itemOfOrder.Id)))
                                                                                        {

                                                                                            <tr class="tr-data-row">

                                                                                                <!-- Hidden Value of Cart Item Start -->
                                                                                                @*<input type="hidden" name="hid-cart-item-id" value="@itemOfOrderItem.Id" />
                                                                                                    <input type="hidden" name="hid-cart-item-cart-id" value="@itemOfOrderItem.CardId" />
                                                                                                    <input type="hidden" name="hid-cart-item-product-id" value="@itemOfOrderItem.ProductId" />
                                                                                                    <input type="hidden" name="hid-cart-item-is-active" value="@(itemOfOrderItem.IsActive ? "true" : "false")" />
                                                                                                    <input type="hidden" name="hid-cart-item-created-datetime" value="@itemOfOrderItem.CreatedDateTime" />*@

                                                                                                <!-- Hidden Value of Cart Item End -->

                                                                                                <td>@itemOfItemOrder.ProductName</td>
                                                                                                <td>
                                                                                                    <img src="~/images/upload/@itemOfItemOrder.PictureFileName" alt="Picture" width="80" />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input type="number" class="form-control col-sm-4" name="Quantity" value="@itemOfItemOrder.Quantity" onchange="CalculateTotalPrice(this)" disabled />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input type="text" class="form-control col-sm-6" name="TotalPrice" value="@itemOfItemOrder.TotalPrice" disabled />
                                                                                                </td>
                                                                                            </tr>

                                                                                        }

                                                                                    </tbody>
                                                                                </table>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                            @*<button type="button" class="btn btn-success" onclick="UpdateCart(this)"><i class="fa fa-check"></i> Success</button>*@
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>

                                NoOfOrderNotComplete++;

                            }

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</center>

@section Scripts {

    <script>
        /*******************************************/
        // Basic Date Range Picker
        /*******************************************/
        $('.daterange').daterangepicker();

        /*******************************************/
        // Date & Time
        /*******************************************/
        $('.datetime').daterangepicker({
            timePicker: true,
            timePickerIncrement: 30,
            locale: {
                format: 'MM/DD/YYYY h:mm A'
            }
        });

        /*******************************************/
        //Calendars are not linked
        /*******************************************/
        $('.timeseconds').daterangepicker({
            timePicker: true,
            timePickerIncrement: 30,
            timePicker24Hour: true,
            timePickerSeconds: true,
            locale: {
                format: 'MM-DD-YYYY h:mm:ss'
            }
        });

        /*******************************************/
        // Single Date Range Picker
        /*******************************************/
        $('.singledate').daterangepicker({
            singleDatePicker: true,
            showDropdowns: true
        });

        /*******************************************/
        // Auto Apply Date Range
        /*******************************************/
        $('.autoapply').daterangepicker({
            autoApply: true,
        });

        /*******************************************/
        // Calendars are not linked
        /*******************************************/
        $('.linkedCalendars').daterangepicker({
            linkedCalendars: false,
        });

        /*******************************************/
        // Date Limit
        /*******************************************/
        $('.dateLimit').daterangepicker({
            dateLimit: {
                days: 7
            },
        });

        /*******************************************/
        // Show Dropdowns
        /*******************************************/
        $('.showdropdowns').daterangepicker({
            showDropdowns: true,
        });

        /*******************************************/
        // Show Week Numbers
        /*******************************************/
        $('.showweeknumbers').daterangepicker({
            showWeekNumbers: true,
        });

        /*******************************************/
        // Date Ranges
        /*******************************************/
        $('.dateranges').daterangepicker({
            ranges: {
                'Today': [moment(), moment()],
                'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                'This Month': [moment().startOf('month'), moment().endOf('month')],
                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            }
        });

        /*******************************************/
        // Always Show Calendar on Ranges
        /*******************************************/
        $('.shawCalRanges').daterangepicker({
            ranges: {
                'Today': [moment(), moment()],
                'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                'This Month': [moment().startOf('month'), moment().endOf('month')],
                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            },
            alwaysShowCalendars: true,
        });

        /*******************************************/
        // Top of the form-control open alignment
        /*******************************************/
        $('.drops').daterangepicker({
            drops: "up" // up/down
        });

        /*******************************************/
        // Custom button options
        /*******************************************/
        $('.buttonClass').daterangepicker({
            drops: "up",
            buttonClasses: "btn",
            applyClass: "btn-info",
            cancelClass: "btn-danger"
        });

        /*******************************************/
        // Language
        /*******************************************/
        $('.localeRange').daterangepicker({
            ranges: {
                "Aujourd'hui": [moment(), moment()],
                'Hier': [moment().subtract('days', 1), moment().subtract('days', 1)],
                'Les 7 derniers jours': [moment().subtract('days', 6), moment()],
                'Les 30 derniers jours': [moment().subtract('days', 29), moment()],
                'Ce mois-ci': [moment().startOf('month'), moment().endOf('month')],
                'le mois dernier': [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')]
            },
            locale: {
                applyLabel: "Vers l'avant",
                cancelLabel: 'Annulation',
                startLabel: 'Date initiale',
                endLabel: 'Date limite',
                customRangeLabel: 'SÃ©lectionner une date',
                // daysOfWeek: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi','Samedi'],
                daysOfWeek: ['Di', 'Lu', 'Ma', 'Me', 'Je', 'Ve', 'Sa'],
                monthNames: ['Janvier', 'fÃ©vrier', 'Mars', 'Avril', 'ÐœÐ°i', 'Juin', 'Juillet', 'AoÃ»t', 'Septembre', 'Octobre', 'Novembre', 'Decembre'],
                firstDay: 1
            }
        });

    </script>

    <script>
        // MAterial Date picker
        $('#mdate').bootstrapMaterialDatePicker({ weekStart: 0, time: false });
        $('#timepicker').bootstrapMaterialDatePicker({ format: 'HH:mm', time: true, date: false });
        $('#date-format').bootstrapMaterialDatePicker({ format: 'dddd DD MMMM YYYY - HH:mm' });

        $('#min-date').bootstrapMaterialDatePicker({ format: 'DD/MM/YYYY HH:mm', minDate: new Date() });
        // Clock pickers
        $('#single-input').clockpicker({
            placement: 'bottom',
            align: 'left',
            autoclose: true,
            'default': 'now'
        });
        $('.clockpicker').clockpicker({
            donetext: 'Done',
        }).find('input').change(function () {
            console.log(this.value);
        });
        $('#check-minutes').click(function (e) {
            // Have to stop propagation here
            e.stopPropagation();
            input.clockpicker('show').clockpicker('toggleView', 'minutes');
        });
        if (/mobile/i.test(navigator.userAgent)) {
            $('input').prop('readOnly', true);
        }
        // Colorpicker
        $(".colorpicker").asColorPicker();
        $(".complex-colorpicker").asColorPicker({
            mode: 'complex'
        });
        $(".gradient-colorpicker").asColorPicker({
            mode: 'gradient'
        });
        // Date Picker
        jQuery('.mydatepicker, #datepicker').datepicker();
        jQuery('#datepicker-autoclose').datepicker({
            autoclose: true,
            todayHighlight: true
        });
        jQuery('#date-range').datepicker({
            toggleActive: true
        });
        jQuery('#datepicker-inline').datepicker({
            todayHighlight: true
        });
        // Daterange picker
        $('.input-daterange-datepicker').daterangepicker({
            buttonClasses: ['btn', 'btn-sm'],
            applyClass: 'btn-danger',
            cancelClass: 'btn-inverse'
        });
        $('.input-daterange-timepicker').daterangepicker({
            timePicker: true,
            format: 'MM/DD/YYYY h:mm A',
            timePickerIncrement: 30,
            timePicker12Hour: true,
            timePickerSeconds: false,
            buttonClasses: ['btn', 'btn-sm'],
            applyClass: 'btn-danger',
            cancelClass: 'btn-inverse'
        });
        $('.input-limit-datepicker').daterangepicker({
            format: 'MM/DD/YYYY',
            minDate: '06/01/2015',
            maxDate: '06/30/2015',
            buttonClasses: ['btn', 'btn-sm'],
            applyClass: 'btn-danger',
            cancelClass: 'btn-inverse',
            dateLimit: {
                days: 6
            }
        });

    </script>

}

